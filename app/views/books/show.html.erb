<%= render ModalComponent.new(id: "rent", title: "Rent") do %>
  <form method="post" action="<%= rent_loan_path %>" class="flex flex-col gap-4">
    <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
    <%= hidden_field_tag :book_id, @book.id %>
    <p>Are you sure you want to rent "<%= @book.title %>"?</p>
    <div class="flex justify-end gap-2">
      <button type="button" class="button-gray" onclick="window.dispatchEvent(new CustomEvent('modal:close', { detail: { id: 'rent' } }))">Cancel</button>
      <button type="submit" class="button-blue">Rent</button>
    </div>
  </form>
<% end %>

<p style="color: green"><%= notice %></p>

<div class="p-5">
  <%= render @book %>

  <div class="flex flex-col">
    <% if user_signed_in? %>
      <button class="button-blue ml-auto" onclick="window.dispatchEvent(new CustomEvent('modal:open', { detail: { id: 'rent' } }))">Rent</button>
    <% else %>
      <p class="ml-auto text-red-500">Please log in to rent this book.</p>
    <% end %>
    <!-- <%= button_to "Rent", rent_loan_path(book_id: @book.id), method: :post, class: "button-blue ml-auto" %> -->
    <!-- <button class="button-blue ml-auto">Rent</button> -->
    <p>
      <%= link_to "Edit this book", edit_book_path(@book) %> |
      <%= link_to "Back to books", books_path %>
    </p>

    <%= button_to "Destroy this book", @book, method: :delete %>
  </div>
</div>
